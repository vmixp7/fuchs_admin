var Fuchs = Fuchs || {}; Fuchs.Product = Fuchs.Product || {}, Fuchs.Product.Data = { data: null, init: function () { this.raw = FuchsProductRawData, this.data = FuchsProductRawData, this.validateData() }, validateData: function () { this.data.groupsLevel1 = [], this.data.groupsLevel2 = [], this.data.groupsLevel3 = [], $.each(this.data.productGroups, function (t, a) { this.data.groupsLevel1.push(a), $.each(a.children, function (t, a) { this.data.groupsLevel2.push(a), $.each(a.children, function (t, a) { this.data.groupsLevel3.push(a) }.bind(this)) }.bind(this)) }.bind(this)), $.each(this.data.products, function (i, t) { this.data.products[i].searchableContent = "", $.each(["title", "previousTitle", "subtitle", "description", "specifications", "approvals", "recommendations", "components"], function (t, a) { "string" == typeof this.data.products[i][a] && 0 < this.data.products[i][a].length && (this.data.products[i].searchableContent += " " + this.data.products[i][a]) }.bind(this)), this.data.products[i].searchableContent = this.data.products[i].searchableContent.toLowerCase(), $.each(["industries", "brands", "groupsLevel1", "groupsLevel2", "groupsLevel3"], function (t, e) { $.each(this.data[e], function (t, a) { var s = e; null == this.data[e][t].count && (this.data[e][t].count = 0), "groupsLevel1" != e && "groupsLevel2" != e && "groupsLevel3" != e || (s = "productGroupRootline"), -1 < this.data.products[i][s].indexOf(this.data[e][t].uid) && this.data[e][t].count++ }.bind(this)) }.bind(this)) }.bind(this)) }, getData: function (t) { return this.data } }; var checkCoreReadyProductData = setInterval(function () { "object" == typeof Fuchs.Application && (clearInterval(checkCoreReadyProductData), Fuchs.Product.Data.init()) }, 100);

var Fuchs = Fuchs || {}; Fuchs.Product = Fuchs.Product || {}, Fuchs.Product.AbstractFilter = { Data: null, page: 1, productsPerPage: 20, current: { products: null, groups: null, industries: null, brands: null, applications: null, sword: null, productGroup: null, generateProductLinks: !1 }, init: function () { this.initData(), this.initAdditional() }, initData: function () { this.Data = Fuchs.Product.Data.getData(), this.Data.defaults && $.each(this.Data.defaults, function (t, e) { this.current[t] = e }.bind(this)) }, handleColHeaderClick: function (t) { this.page = 1; var a = $(t.currentTarget), i = "asc"; i = a.hasClass("product-list-filter-down") ? (a.removeClass("product-list-filter-down").addClass("product-list-filter-up"), "desc") : (a.addClass("product-list-filter-down").removeClass("product-list-filter-up"), "asc"), this.Data.products.sort(function (t, e) { switch (a.data("attr")) { case "title": return "asc" == i ? t.title.localeCompare(e.title) : e.title.localeCompare(t.title); case "date": return t.date != e.date ? "asc" == i ? t.date.localeCompare(e.date) : e.date.localeCompare(t.date) : "asc" == i ? t.title.localeCompare(e.title) : e.title.localeCompare(t.title) } }), this.updateCurrentProducts() }, updateCurrentProducts: function () { }, handlePagerClick: function (t) { t.preventDefault(); var e = $(t.currentTarget); this.page = parseInt(e.data("page")), 0 < e.closest(".product-list-pager-bottom").length && $("html, body").animate({ scrollTop: $(".product-list-pager-top").first().offset().top - 120 }), this.updateCurrentProducts() }, updatePager: function () { var t = $(".product-list-pager"); if (t.html(""), this.maxPages < 2) return !1; this.page > this.maxPages && (this.page = 1); var e = $('<ul class="pagination pull-right"/>'); e.append('<li class="' + (1 == this.page ? "disabled" : "") + '" data-page="' + (1 < this.page ? this.page - 1 : "") + '"><a><svg role="img" class="svgicon svgicon-arrow-left"><use xlink:href="#svgicon-arrow-left"></use></svg></a></li>'); for (var a, i, s = null, r = 1; r <= this.maxPages; r++)1 == r && e.append('<li class="' + (r == this.page ? "active" : "") + '" data-page="' + r + '"><a href="#">' + r + "</a></li>"), r >= this.page - 1 && r <= this.page + 1 && 1 != r && r != this.maxPages && (s = r == this.page - 1 ? a = $('<li class="previous" data-page="' + r + '"><a>' + r + "</a></li>") : r == this.page ? $('<li class="active" data-page="' + r + '"><a>' + r + "</a></li>") : i = $('<li class="next" data-page="' + r + '"><a>' + r + "</a></li>"), e.append(s)), r == this.maxPages && e.append('<li class="' + (r == this.page ? "active" : "") + '" data-page="' + r + '"><a href="#">' + r + "</a></li>"); 3 < this.page && $('<li class="spacer"><a>...</a></li>').insertBefore(a), this.page < this.maxPages - 2 && $('<li class="spacer"><a>...</a></li>').insertAfter(i), e.append('<li class="' + (this.page == this.maxPages ? "disabled" : "") + '" data-page="' + (this.page < this.maxPages ? this.page + 1 : "") + '"><a><svg role="img" class="svgicon svgicon-arrow-right"><use xlink:href="#svgicon-arrow-right"></use></svg></a></li>'), t.append(e) }, updateList: function (t) { this.maxPages = Math.ceil(this.current.products.length / this.productsPerPage), $(".product-list-not-found").hide(), $(".product-list-found,.product-list-header").hide(); var e = $(".product-list-product-group-description-wrapper"); if (e.find("*").remove(), 0 == this.current.products.length) { var a = this.getProductGroupData(this.current.productGroup); if (a && a.description && (e.append('<div class="product-list-product-group-title h4">' + a.title + "</div>"), e.append('<div class="product-list-product-group-description">' + a.description + "</div>")), !0 !== t) { var i = $(".product-list-not-found"); a && 0 < $(".product-list-not-found-assistant").length && (a.no_products_text ? (i.find(".cta-text").hide(), i.find(".heading").hide(), i.find(".default-text").show(), i.find(".default-text").html(a.no_products_text)) : (i.find(".contact-name").text(a.contact.name), a.contact.phone ? (i.find(".contact-phone").text(a.contact.phone), i.find(".contact-phone").show(), i.find(".label-contact-phone").show()) : (i.find(".contact-phone").hide(), i.find(".label-contact-phone").hide()), i.find(".contact-company").text(a.contact.company), i.find(".contact-email a").attr("href", "mailto:" + a.contact.email).text(a.contact.email), i.find(".cta-text").show(), i.find(".heading").show(), i.find(".default-text").hide())), i.show() } } else $(".product-list-found,.product-list-header").show(), $(".product-found-counter").text(this.current.products.length); this.updatePager(); var r = $(".product-list"); r.html(""), $.each(this.current.products, function (t, i) { if (t >= (this.page - 1) * this.productsPerPage && t < this.page * this.productsPerPage) { var s = $($("template#product-entry").html()); $.each(["title", "subtitle", "specifications", "approvals", "recommendations", "date"], function (t, e) { var a = s.find(".product-" + e); "approvals" == e || "specifications" == e || "recommendations" == e ? (a.parent().hide(), !this.current.productGroup || -1 == this.getProductGroupData(this.current.productGroup).rootline.indexOf(339) && -1 == this.getProductGroupData(this.current.productGroup).rootline.indexOf(14668) || (i[e] ? a.html(i[e]) : a.html('<span class="product-attribute-empty">-</span>'), a.parent().show()), 0 < $("#page-10109").length && a.parent().hide()) : i[e] ? "date" === e ? 0 < $(".product-list-wrap .col-date").length ? a.html(i[e]) : a.parent().hide() : "subtitle" === e ? (a.html(i[e]), this.current.generateProductLinks && a.next().show()) : a.html(i[e]) : a.parent().hide() }.bind(this)); var e = s.find(".cy_js_product__flags"), a = ""; i.isSpecialApplications && (a += '<img class="cy_product__flag cy_product__flag--isSpecialApplications" alt="FUCHS Special Applications" src="' + TYPO3.assetPaths.cyzFuchsProducts + 'Images/FUCHSSpecialApplications_RGB_positiv.svg">', (i.isNew || i.isBluev || i.isAct || i.isEcolabel) && (a += "<br />")), "" !== i.isNew && (a += '<span class="cy_product__flag cy_product__flag--isNew">' + i.isNew + "</span>"), i.isEcolabel && (a += '<img class="cy_product__flag cy_product__flag--isEcolabel" alt="Ecolabel" src="' + TYPO3.assetPaths.cyzFuchsProducts + 'Images/FUCHS_Ecolabel_Web.svg">'), i.isBluev && (a += '<img class="cy_product__flag cy_product__flag--isBluev" alt="BlueEV" src="' + TYPO3.assetPaths.cyzFuchsProducts + 'Images/FUCHS_BluEV_Technology_rgb_positive.svg">'), i.isAct && (a += '<img class="cy_product__flag cy_product__flag--isAct" alt="ACT" src="' + TYPO3.assetPaths.cyzFuchsProducts + 'Images/FUCHS_ACT_Web.svg">'), e.append(a), 0 < r.closest(".tx-udg-fuchs-products").find(".product-filter-for-downloads").length && i.urlToDownloadPage ? (s.find(".product-title").removeAttr("target"), s.find(".product-title").attr("href", i.urlToDownloadPage), s.find(".product-subtitle-link").attr("href", i.urlToDownloadPage)) : (s.find(".product-title").attr("href", i.url), s.find(".product-subtitle-link").attr("href", i.url), i.previousTitle && (s.find(".product-title").text(s.find(".product-title").text() + "\n(" + i.previousTitle + ")"), s.find(".product-title").html(s.find(".product-title").html().replace(/\n/g, "<br/>")), s.find(".product-subtitle-link-with-previous-title-product-previous-title").text(i.previousTitle), s.find(".product-subtitle-link-with-previous-title").show(), s.find(".product-subtitle-link").hide(), s.find(".product-subtitle-link-with-previous-title").attr("href", i.url))), "" != s.find(".product-date").text() && s.find(".product-subtitle").parent().removeClass("col-xs-12").addClass("col-xs-8"), r.append(s) } }.bind(this)) }, getProductGroupData: function (a) { var i = null; return jQuery(Fuchs.Product.Data.raw.productGroups).each(function (t, e) { e.uid != a ? e.children && 0 < e.children.length && jQuery(e.children).each(function (t, e) { e.uid == a ? i = e : 0 < e.children.length && jQuery(e.children).each(function (t, e) { e.uid == a && (i = e) }) }) : i = e }), i } };

var Fuchs = Fuchs || {}; Fuchs.Product = Fuchs.Product || {}, Fuchs.Product.Filter = { initAdditional: function () { this.initFilter(); var t = $("body"); /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) && $(".selectpicker").selectpicker("mobile"), $(".product-filter input").on("input", this.handleInputChange.bind(this)), $(".product-filter select").on("change", this.handleSelectChange.bind(this)), t.on("click", ".product-list-pager li:not(.disabled,.spacer)", this.handlePagerClick.bind(this)), t.on("click", ".product-filter-select-reset", this.handleSelectReset.bind(this)), t.on("click", ".col-name, .col-date", this.handleColHeaderClick.bind(this)), t.on("click", ".product-filter-categories-top a", this.handleCategoryImageClick.bind(this)), 0 < $(".product-filter-categories-top").length && $.each(this.Data.groupsLevel2, function (t, e) { 0 < e.count && $('.product-filter-categories-top .product-group-teaser[data-uid="' + e.uid + '"]').show() }.bind(this)), "string" == typeof window.location.hash && 2 < window.location.hash.length && this.jumpToFilterWithAnchor(window.location.hash), 0 < $("#page-10109").length && (this.sortByTitle(), this.updateCurrentProducts()), this.Data.defaults.groupLevel3Uid && ($('.tx-udg-fuchs-products select[data-use="groupsLevel3"]').selectpicker("val", this.Data.defaults.groupLevel3Uid), $(".product-filter select").trigger("change")); this.Data.defaults.search && ($('.tx-udg-fuchs-products input[name="search"]').attr("value", this.Data.defaults.search), $('.tx-udg-fuchs-products input[name="search"]').trigger("input")) }, sortByTitle: function () { this.Data.products.sort(function (t, e) { return t.title.localeCompare(e.title) }) }, handleCategoryImageClick: function (t) { var e = $(t.currentTarget).attr("href").split("#"); if (2 !== e.length) return !0; var i = "#" + e[1]; t.preventDefault(), window.location.hash = i, this.jumpToFilterWithAnchor(i) }, jumpToFilterWithAnchor: function (t) { this.page = 1; var i = (t = t.slice(1)).split("-")[0]; if ("object" != typeof FuchsProductRawData) return !1; var a = null; if ($.each(FuchsProductRawData.productGroups, function (t, e) { $.each(e.children, function (t, e) { e.uid == i && (a = e.uid) }) }), null === a) return !1; $('select[data-use="groupsLevel2"]').selectpicker("val", a), this.updateFilter(); var e = $(".product-filter-selects").offset().top - 80; $("html, body").animate({ scrollTop: e }, 200) }, initFilter: function () { this.Data.defaults && this.Data.defaults.sword && $('input[data-use="sword"]').val(this.Data.defaults.sword), $(".product-filter select").each(function (t, e) { var r = $(e), s = r.data("use"); null != this.Data[s] ? $.each(this.Data[s], function (t, i) { var e = !1; if (null != this.Data.defaults[s] && null != this.Data.defaults[s] && "" != this.Data.defaults[s] && this.Data.defaults[s] == i.uid && (e = "true"), "groupsLevel2" == s) { this.Data.defaults.groupLevel2Uid == i.uid && (e = "true"); var a = null; 0 < this.Data.defaults.groups.length ? (a = parseInt(this.Data.defaults.groups[0]), i.parent_id == a && this.addOptionToSelect(r, i, e), i.uid == a && this.addOptionToSelect(r, i, !0)) : ($.each(this.Data.groupsLevel1, function (t, e) { e.uid == i.parent_id && (a = e.title) }.bind(this)), this.addOptionToSelect(r, i, e, a)) } else this.addOptionToSelect(r, i, e) }.bind(this)) : console.error(s + " does not exist") }.bind(this)), this.updateFilter() }, handleInputChange: function (t) { this.page = 1, this.updateFilter() }, handleSelectReset: function (t) { var e = $(t.currentTarget), i = e.parent().find("select"), a = e.parent().find("input"); 0 < i.length && i.selectpicker("deselectAll"), 0 < a.length && (a.val(""), a.trigger("input")) }, updateCurrentProducts: function () { this.current.products = [], this.current.productGroup = $('select[data-use="groupsLevel3"]').val() || $('select[data-use="groupsLevel2"]').val() || (this.current.groups ? this.current.groups[0] : null), this.current.productGroup && (this.current.productGroup = parseInt(this.current.productGroup)); var s = parseInt($('select[data-use="industries"]').val()), u = parseInt($('select[data-use="brands"]').val()), t = document.querySelector('input[data-use="ecolabel"]'), n = null != t && t.checked, e = document.querySelector('input[data-use="bluev"]'), c = null != e && e.checked, i = $('input[data-use="sword"]').val().toLowerCase(), l = []; i && (l = i.split(" ")), $.each(this.Data.products, function (t, i) { var e = !0, a = !0, r = !0; this.current.productGroup && -1 == i.productGroupRootline.indexOf(this.current.productGroup) && (e = !1), s && -1 == i.industries.indexOf(s) && (e = !1), u && -1 == i.brands.indexOf(u) && (e = !1), n && !i.isEcolabel && (r = !1), c && !i.isBluev && (r = !1), 0 < l.length && $.each(l, function (t, e) { -1 == i.searchableContent.indexOf(e) && (a = !1) }.bind(this)), e && a && r && this.current.products.push(i) }.bind(this)), this.updateList() }, handleSelectChange: function (t) { this.page = 1, this.updateFilter(), this.updateCurrentProducts() }, updateFilter: function () { var a = $(".tx-udg-fuchs-products select.selectpicker"); a.each(function (t, e) { var i = $(e), u = i.selectpicker("val"), n = i.data("use"); a.each(function (t, e) { var i = $(e), a = i.data("depends"), r = i.data("use"), s = i.data("parent"); n == a && (i.removeAttr("disabled"), s != u && (i.data("parent", u), i.html(""), i.val(""), $.each(this.Data[r], function (t, e) { parseInt(e.parent_id) == parseInt(u) && this.addOptionToSelect(i, e) }.bind(this))), null != u && "" != u && null != u || n != a || (i.html(""), i.val(""), i.attr("disabled", "disabled")), i.selectpicker("refresh")) }.bind(this)) }.bind(this)), a.each(function (t, e) { var i = $(e); 0 == i.find('option[value!=""]').length ? (i.val(""), i.attr("disabled", "disabled")) : i.removeAttr("disabled"), i.selectpicker("refresh") }), this.updateCurrentProducts() }, addOptionToSelect: function (t, e, i, a) { var r = $(t), s = r; if (a) { var u = r.find('optgroup[label="' + a + '"]'); 0 == u.length && (u = $('<optgroup label="' + a + '"/>'), $(t).append(u)), s = u } 0 < e.count && s.append('<option value="' + e.uid + '" ' + (i ? 'selected="selected"' : "") + ">" + e.title + " (" + e.count + ") </option>") } }; var checkCoreReadyList = setInterval(function () { "object" == typeof Fuchs.Application && (clearInterval(checkCoreReadyList), Fuchs.Product.Filter = $.extend(Fuchs.Product.AbstractFilter, Fuchs.Product.Filter), Fuchs.Product.Filter.init()) }, 100);
